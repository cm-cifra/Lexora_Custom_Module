<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Root menu under Inventory -->
    <menuitem id="menu_stock_move_line_return_root"
              name="Stock Move Lines"
              parent="stock.menu_stock_root"
              sequence="30"/>

    <!-- Action: Only return move lines -->
    <record id="action_stock_move_line_return" model="ir.actions.act_window">
        <field name="name">Return Move Lines</field>
        <field name="res_model">stock.move.line</field>
        <field name="view_mode">tree,form</field>
        <!-- ✅ Filter by reference starting with WH/IN/RETURN -->
        <field name="domain">[("reference", "like", "WH/IN/RETURN%")]</field>
        <field name="view_id" ref="view_stock_move_line_return_tree"/>
        <field name="help" type="html">
            <p>No return stock move lines found.</p>
        </field>
    </record>

    <!-- Custom Tree View for Return Moves -->
    <record id="view_stock_move_line_return_tree" model="ir.ui.view">
        <field name="name">stock.move.line.return.tree</field>
        <field name="model">stock.move.line</field>
        <field name="arch" type="xml">
            <tree string="Return Move Lines">
                <field name="reference"/>
                <field name="product_id"/>
                <field name="lot_id"/>
                <!-- qty_done removed because it doesn’t exist in your DB -->
                <field name="product_uom_id"/>
                <field name="product_uom_qty"/>
                <field name="location_id"/>
                <field name="location_dest_id"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <!-- Submenu -->
    <menuitem id="menu_stock_move_line_return"
              name="Return Moves"
              parent="menu_stock_move_line_return_root"
              action="action_stock_move_line_return"
              sequence="10"/>
</odoo>
